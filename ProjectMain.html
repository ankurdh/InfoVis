<html>

<head>
	<meta charset="utf-8">
	<script src="http://d3js.org/d3.v3.min.js"></script>
</head>

<body>
	<div id="viz1">
		<script type="text/javascript">

			var data;

			var svg = d3.select("body").append("svg")
			    .attr("width", 1400)
    			.attr("height", 1400);

    			d3.json("data.json", function(error, json) {
			  if (error) return console.warn(error);
				console.log(json.dept);

				var fromX = json.deptx,
					fromY = json.depty;


			  svg.selectAll("line")
			  	.data(json.conc)
			  	.enter()
				.append("line")
			  	.attr("x1", fromX)
                .attr("y1", fromY)
                .attr("x2", function(d){return d.x;})
                .attr("y2", function(d){return d.y;})
                .attr("stroke-width", 2)
                .attr("stroke", "black");

			  svg.append("ellipse")
			  	.attr("cx", json.deptx)
			  	.attr("cy", json.depty)
			  	.attr("rx", 80)
			  	.attr("ry", 40)
				.style("stroke", "blue")
				.style("fill", "white")
				.on("mouseover", function(){d3.select(this).style("fill", "aliceblue");})
        		.on("mouseout", function(){d3.select(this).style("fill", "white");})
        		.on("mousedown", function(){window.alert(json.dept);});

			  svg.append("text")
			  	.text(json.dept)
			  	.attr("x", json.deptx-30)
			  	.attr("y", json.depty)
			   	.attr("font-family", "sans-serif")
			  	.attr("font-size", "11px")
			    .attr("fill", "black");

			  svg.selectAll("ellipse")
			  	.data(json.conc)
			  	.enter()
			  	.append("ellipse")
				.attr("cx", function(d){return d.x;})
				.attr("cy", function(d){return d.y;})
				.attr("rx", 40)
				.attr("ry", 20)
				.style("stroke", "blue")
				.style("fill", "white");

				svg.selectAll("text")
					.data(json.conc)
					.enter()
					.append("text")
					.text(function(d){return d.name;})
					.attr("x", function(d){return d.x-10;})
					.attr("y", function(d){return d.y;})
				 	.attr("font-family", "sans-serif")
					.attr("font-size", "10px")
			    	.attr("fill", "black");
			});



			console.log(data);

			d3.selectAll("ellipse")
			.data(data)
			.enter()
			.append("text")
			.text(function(d){console.log(d.dept);});



			visOne.append("ellipse")
				.style("stroke", "blue")
				.style("fill", "white")
				.attr("rx", 80)
				.attr("ry", 40)
				.attr("cx", 400)
				.attr("cy", 200)
				.on("mouseover", function(){d3.select(this).style("fill", "aliceblue");})
        		.on("mouseout", function(){d3.select(this).style("fill", "white");})
        		.on("mousedown", function(){console.log("Mouse clicked inside Computer Science");});

			visOne.selectAll("text")
				.data(dept)
				.enter()
				.append("text")
			   	.text(function(d){
			   		return d.toString();
			   		console.log(d.toString());
			   	})
			   	.attr("x", 355)
			   	.attr("y", 205)
 			    .attr("font-family", "sans-serif")
			    .attr("font-size", "11px")
			    .attr("fill", "black");

			visOne.selectAll("ellipse")
				.data(data)
				.enter()
				.append("ellipse")
				.attr("cx", function(d){return d.x;})
				.attr("cy", function(d){return d.y;})
				.attr("rx", 40)
				.attr("ry", 20)
				.style("stroke", "blue")
				.style("fill", "white")
				.on("mouseover", function(){d3.select(this).style("fill", "aliceblue");})
        		.on("mouseout", function(){d3.select(this).style("fill", "white");})
        		.on("mousedown", function(d){console.log("Mouse clicked inside " + d.name); window.alert("Selected Concentration: " + d.name);});

			visOne.selectAll("text")
				.data(concArr)
				.enter()
				.append("text")
				.attr("font-size", "11px")
				.text(function(d){return d.name;}).attr("x", function(d){return d.x-25;}).attr("y", function(d){return d.y+5;});

		</script>
	</div>
</body>
</html>